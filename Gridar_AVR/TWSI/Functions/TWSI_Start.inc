/*
* Запускает модуль TWSI
* Принимает два аргумента
* @0 - адрес модуля TWSI
* @1 - 'W'-запись / 'R'-чтение
* и передает в функцию TWSI_SLA после подачи сигнала START
*/
.macro TWSI_START										; макрос START
	_call TWSI_START_act
	TWSI_SLA @0, @1
.endm													; выход из макроса
//____________________________________________________________________________________
//____________________________________________________________________________________
TWSI_START_act:
	push r16
	ldi		r16, (1<<TWINT) | (1<<TWSTA) | (1<<TWEN)	; формируем сагнал START
	WRITE_REG TWCR, r16									; отправляем по шине
	TWSI_TWINT_Flag
	pop r16
ret
 